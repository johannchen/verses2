
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Verses</title>

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container">
      <div class="header">
        <div class="pull-right">
          {{> loginButtons align="right"}}
        </div>
        <h3 class="text-muted">Verses</h3>
      </div>

      {{#if currentUser}}
        <div id="main-pane">
          {{> goal}}
          {{> tag_filter}}
          {{> mem_filter}}
          {{> verses}}
        </div>
        
        {{> goal_setting}}
        {{> memorization}}
      {{else}}
        {{> mission}}
      {{/if}}

      {{> about}}

      <div class="footer">
        <div class="row">
           <div class="col-md-6">
            &copy; Johann Chen 2014 
           </div>
           <div class="col-md-6 text-right">
            <a href="#" data-toggle="modal" data-target="#aboutModal">About</a>
           </div> 
        </div>
      </div>

    </div> <!-- /container -->
    {{> top_link}}

  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
</body>

<template name="verses">
  <div class="row">
    <div class="col-lg-3">
      <select class="form-control" id="book">
        <option value="">Bible</option>
        {{#each books}}
          <option value="{{book}}">{{book}}</option>
        {{/each}}
      </select>
    </div>
    <div class="col-lg-3">
      <input type="text" class="form-control" id="search" placeholder="Search Verses">
    </div>
    <div class="col-lg-6">
      <input type="text" class="form-control" id="new-verse" list="bible" placeholder="New Verse (e.g. Romans 12:1-2)">
      <datalist id="bible">
        {{#each books}}
          <option value="{{book}}"></option>
        {{/each}}
      </datalist>
    </div>
  </div>

  {{> flashMessages}}
  
  <div class="row marketing">   
    {{#each verses}}
      {{> verse}}
    {{/each}}     
  </div>
</template>

<template name="verse">
  <div class="col-lg-12">
    <article class="thumbnail mverse{{memorized}}">
      <header class="verse-header">
        <strong>{{title}}</strong>
        {{#if addingTag}}
          <span class="add-tag"><input type="text" id="newTag" list="tag-list" placeholder="new tag" value="" /></span>
          <datalist id="tag-list">
          {{#each dropdownTags}}
            <option value="{{dropdownTag}}"></option>
          {{/each}}
        </datalist>
        {{else}}
          <span class="glyphicon glyphicon-th-large pointer add-tag" title="add tag"></span>
        {{/if}}
        <ul class="list-inline tags">
          {{#each verseTags}}
            <li>
              <span class="label label-primary tag">{{tag}}
                <span class="pointer remove-tag">&times;</span>
              </span>
            </li>
          {{/each}}          
        </ul>
        <button type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>    
      </header>
      <p>{{content}}</p>
      <p>
        <a href="#" class="btn btn-default btn-xs memorize" title="to memorize" data-toggle="modal" data-target="#verseModal"><span class="glyphicon glyphicon-star"></span> {{memorized}}</a>
        <ul class="list-inline stars">
          {{#each memorizations}}
            <li>
              <span class="glyphicon glyphicon-star-empty" title="memorized at {{formatDate memorization "long"}}"></span>
            </li>
          {{/each}}
        </ul>       
      </p> 
    </article>
  </div>
</template>

<template name="memorization">
  <!-- Modal -->
  <div class="modal fade" id="verseModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">{{title}}</h4>
        </div>
        <div class="modal-body">
          <textarea id="typedVerse" class="form-control" rows="3" placeholder="type verse to memorize"></textarea>
          <p id="diff">{{diff}}</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" id="tryAgain">Try again</button>
          <button type="button" class="btn btn-primary" id="submitVerse">Submit</button>
          <button type="button" class="btn btn-default" id="startOver">Reset</button>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="goal">    
  <div class="progress">
    <div class="progress-bar" role="progressbar" aria-valuenow="{{memCount}}" aria-valuemin="0" aria-valuemax="{{total}}" style="width: {{percentage}}%;">
      <span class="pointer set-goal">{{percentage}}% >= {{starNumber}} Starred</span>
    </div>
  </div>
</template>  

<template name="goal_setting">
 <!-- Modal -->
  <div class="modal fade" id="goalModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">Set Goal</h4>
        </div>
        <div class="modal-body">
          <form class="form-horizontal">
            <div class="form-group">
              <label for="starNumber" class="col-sm-2 control-label">Stars</label>
              <div class="col-sm-2">
                <input type="number" class="form-control" id="starNumber" min="1" value="{{stars}}">
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="submitGoal">Submit</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</template> 

<template name="tag_filter">
  <div id="tag-filter" class="filter">
    <ul class="list-inline tags">
      {{#each tags}}
        <li>
          <span class="label label-{{selected}} tag pointer">
            {{tag}}
          </span>
        </li>
      {{/each}}
    </ul>
  </div>
  
</template>

<template name="mem_filter">
  <div id="mem-filter" class="filter">
    <ul class="list-inline tags">
      {{#each tags}}
      <li>
        <span class="label label-{{selected}} pointer tag">{{tag}}
        </span>
      </li>
      {{/each}}
      <li>
        <span class="search-term pointer">
          <em>{{search}}</em>
        </span>      
      </li>
      <li>
        Results: <strong>{{count}}</strong>
      </li>
    </ul>
  </div>
</template>

<template name="top_link">
  <span id="top-link" class="hidden">
    <a href="#" class="well well-sm">
      <i class="glyphicon glyphicon-chevron-up"></i> Scroll to Top
    </a>
  </span>
</template>

<template name="mission">
  <p>Verses helps you to organize and memorize your favorite Bible verses. May your heart and mind be filled with God's words, which you can put to good use in time of need.</p>
</template>

<template name="about">
  <!-- Modal -->
  <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="aboutModalLabel">About Verses</h4>
        </div>
        <div class="modal-body">
          <p>Verses helps you to organize and memorize your favorite Bible verses. May your heart and mind be filled with God's words, which you can put to good use in time of need.</p>
          <p>This application is developed by Johann Chen. He is available as a freelancer to work on any web application project using  <a href="https://www.meteor.com/">Meteor</a> or <a href="http://rubyonrails.org/">Ruby on Rails</a>. He is passionate about writing web applications for churches or for any good cause. He along with his wife and two young daughters are involved in medical missions overseas. If you are led by the Spirit to support them financially, please email Johann at johannchen at gmail.com</p>
          <p>Also if you have any feedback about the applicaiton, please email Johann. Hope you find this applicaiton helpful, and God bless you!</p>
          <p>Scripture taken from The Holy Bible, English Standard Version. Copyright Â©2001 by <a href="http://www.crossway.org/bibles/">Crossway Bibles</a>, a publishing ministry of Good News Publishers. Used by permission. All rights reserved. Text provided by the <a href="http://www.esvapi.org/">Crossway Bibles Web Service</a>.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</template>
