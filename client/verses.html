
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Verses Memorization</title>

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <div class="container">
      <div class="header">
        <div class="pull-right">
          {{> loginButtons align="right"}}
        </div>
        <h3 class="text-muted">Verses Memorization</h3>
      </div>

      {{#if currentUser}}
        <div id="main-pane">
          {{> tag_filter}}
          {{> mem_filter}}
          {{> verses}}
        </div>

        {{> memorization}}
      {{else}}
        <p>Verses Memorization helps you to memorize Bible verses by typing. May your heart and mind be filled with God's words, which you can put to good use in time of need.</p>
      {{/if}}

      <div class="footer">
        <p>&copy; Johann Chen 2014</p>
      </div>

    </div> <!-- /container -->
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
</body>

<template name="verses">
  <p><span class="search-term pointer"><u><em>{{search}}</em></u></span>
   Results: <strong>{{count}}</strong></p>
  <div class="row">
    <div class="col-lg-6">
      <input type="text" class="form-control" id="search" placeholder="Search Verse">
    </div>
    <div class="col-lg-6">
      <input type="text" class="form-control" id="new-verse" list="bible" placeholder="New Verse Reference">
      <datalist id="bible">
        {{#each books}}
          <option value="{{book}}"></option>
        {{/each}}
      </datalist>
    </div>
  </div>
    
  {{> flashMessages}}
  
  <div class="row marketing">   
    {{#each verses}}
      {{> verse}}
    {{/each}}     
  </div>
</template>

<template name="verse">
  <div class="col-lg-12">
    <article class="thumbnail mverse{{memorized}}">
      <header class="verse-header">
        <strong>{{title}}</strong>
        <span class="badge memorize pointer" title="last memorized at {{formatDate last_memorized_at "short"}}" data-toggle="modal" data-target="#verseModal">{{memorized}}</span>
        {{#if addingTag}}
          <span><input type="text" id="newTag" placeholder="new tag" value="" /></span>
        {{else}}
          <span class="glyphicon glyphicon-plus pointer add-tag" title="add tag"></span>
        {{/if}}
        <ul class="list-inline tags">
          {{#each verseTags}}
            <li>
              <span class="label label-primary tag">{{tag}}
                <span class="pointer remove-tag">&times;</span>
              </span>
            </li>
          {{/each}}
          
        </ul>
        <button type="button" class="close"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>    
      </header>
      <p>{{content}}</p> 
    </article>
  </div>
</template>

<template name="memorization">
  <!-- Modal -->
  <div class="modal fade" id="verseModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title" id="myModalLabel">{{title}}</h4>
        </div>
        <div class="modal-body">
          <textarea id="typedVerse" class="form-control" rows="3" placeholder="type verse to memorize"></textarea>
          <p id="diff">{{diff}}</p>
        </div>
        <div class="modal-footer">
          <!--
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        -->
          <button type="button" class="btn btn-default" id="tryAgain">Try again</button>
          <button type="button" class="btn btn-primary" id="submitVerse">Submit</button>
          <button type="button" class="btn btn-default" id="startOver">Reset</button>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="tag_filter">
  <div id="tag-filter" class="filter">
    <ul class="list-inline tags">
      {{#each tags}}
        <li>
          <span class="label label-{{selected}} tag pointer">
            {{tag}}
          </span>
        </li>
      {{/each}}
    </ul>
  </div>
  
</template>

<template name="mem_filter">
  <div id="mem-filter" class="filter">
    <ul class="list-inline tags">
      {{#each tags}}
      <li>
        <span class="label label-{{selected}} pointer tag">{{tag}}
        </span>
      </li>
      {{/each}}
    </ul>
  </div>
</template>
